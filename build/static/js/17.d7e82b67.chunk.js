(this["webpackJsonpnotsnowy.finance"]=this["webpackJsonpnotsnowy.finance"]||[]).push([[17],{1510:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return Ae}));var a,r,c,o=t(2),i=t.n(o),u=t(14),l=t(43),s=t(1),d=t.n(s),m=t(772),f=t(747),p=t.n(f),b=t(34),O=t(42),h=t(55),x=t(704),g=t(775),v=t(35),j=t(1487),E=t(687),N=t(1015),y=t(218),k=t(693),w=t(688),D=t(1063),C=t(1065),S=t(711),P=t(221),T=b.d.button(a||(a=Object(l.a)(["\n  align-items: center;\n  background-color: ",";\n  border: 0;\n  border-radius: 12px;\n  box-shadow: ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: ","px;\n  font-weight: 700;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  padding-left: ","px;\n  padding-right: ","px;\n  pointer-events: ",";\n  width: 100%;\n  box-shadow: 6px 6px 6px #0E1D2F70;\n  &:hover {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.color.grey[900]}),(function(e){return e.boxShadow}),(function(e){return e.disabled?"".concat(e.color,"55"):e.color}),(function(e){return e.fontSize}),(function(e){return e.size}),(function(e){return e.padding}),(function(e){return e.padding}),(function(e){return e.disabled?"none":void 0}),(function(e){return e.color}),(function(e){return e.theme.color.grey[900]})),z=Object(b.d)(P.b)(r||(r=Object(l.a)(["\n  align-items: center;\n  color: inherit;\n  display: flex;\n  flex: 1;\n  height: 56px;\n  justify-content: center;\n  margin: 0 ","px;\n  padding: 0 ","px;\n  text-decoration: none;\n"])),(function(e){return-e.theme.spacing[4]}),(function(e){return e.theme.spacing[4]})),A=b.d.a(c||(c=Object(l.a)(["\n  align-items: center;\n  color: inherit;\n  display: flex;\n  flex: 1;\n  height: 56px;\n  justify-content: center;\n  margin: 0 ","px;\n  padding: 0 ","px;\n  text-decoration: none;\n"])),(function(e){return-e.theme.spacing[4]}),(function(e){return e.theme.spacing[4]})),B=function(e){var n,t,a,r,c=e.children,o=e.disabled,i=e.href,u=e.onClick,l=e.size,m=e.text,f=e.to,p=e.variant,O=Object(s.useContext)(b.a),h=O.color,x=O.spacing;switch(p){case"secondary":n=h.teal[200];break;case"default":default:n=h.primary.main}switch(l){case"sm":a=x[3],t=36,r=14;break;case"lg":a=x[4],t=72,r=16;break;case"md":default:a=x[4],t=56,r=16}var g=Object(s.useMemo)((function(){return f?d.a.createElement(z,{to:f},m):i?d.a.createElement(A,{href:i,target:"__blank"},m):m}),[i,m,f]);return d.a.createElement(T,{boxShadow:void 0,color:n,disabled:o,fontSize:r,onClick:u,padding:a,size:t},c,g)},I=t(692),R=t(689),M=t(695),U=t(686),F=t(25),V=function(e){var n=e.max,t=e.title,a=e.description,r=e.onConfirm,c=e.onDismiss,o=e.action,i=e.tokenName,u=Object(s.useState)(""),l=Object(v.a)(u,2),m=l[0],f=l[1],p=Object(s.useMemo)((function(){return Object(F.b)(n)}),[n]),b=Object(s.useCallback)((function(e){return f(e.currentTarget.value)}),[f]),O=Object(s.useCallback)((function(){f(p)}),[p,f]);return d.a.createElement(I.a,null,d.a.createElement(M.a,{text:t}),d.a.createElement(U.a,{value:m,onSelectMax:O,onChange:b,max:p,symbol:i}),d.a.createElement(k.a,{text:a}),d.a.createElement(R.a,null,d.a.createElement(B,{text:"Cancel",variant:"secondary",onClick:c}),d.a.createElement(B,{text:o,onClick:function(){return r(m)}})))},W=t(696),_=t(705),G=t(97);var K,L,J,q,H,Q,X,Y,Z,$,ee,ne,te,ae,re,ce=function(){var e=Object(G.b)();return Object(s.useCallback)((function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected error is occurred.";n.catch((function(n){n.message.includes("User denied")||(console.error("Uncaught exception: ".concat(n.stack)),e({error:{message:t,stack:n.stack}}))}))}),[e])},oe=b.d.div(K||(K=Object(l.a)(["\n  align-items: center;\n  display: flex;\n  font-size: 20px;\n  font-weight: 700;\n  height: 64px;\n  justify-content: center;\n  margin-top: ","px;\n"])),(function(e){return-e.theme.spacing[3]})),ie=b.d.div(L||(L=Object(l.a)(["\n  background-color: ",";\n  width: 72px;\n  height: 72px;\n  border-radius: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.color.grey[900]}),(function(e){return e.theme.spacing[2]})),ue=b.d.div(J||(J=Object(l.a)(["\n  align-items: center;\n  display: flex;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[5]})),le=b.d.div(q||(q=Object(l.a)(["\n  font-size: 20px;\n  padding-left: ","px;\n  padding-right: ","px;\n  padding-bottom: ","px;\n"])),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[4]})),se=b.d.div(H||(H=Object(l.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n"]))),de=b.d.div(Q||(Q=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.spacing[3]})),me=b.d.span(X||(X=Object(l.a)([""]))),fe=b.d.div(Y||(Y=Object(l.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),pe=function(e){var n=e.action,t=e.fromToken,a=e.fromTokenName,r=e.toToken,c=e.toTokenName,o=e.priceDesc,i=e.onExchange,u=e.disabled,l=void 0!==u&&u,s=e.disabledDescription,m=ce(),f=Object(y.a)().contracts.Treasury,p=Object(_.b)(t,f.address),b=Object(v.a)(p,2),O=b[0],h=b[1],x=Object(W.a)(t),g=Object(S.a)(d.a.createElement(V,{title:n,description:o,max:x,onConfirm:function(e){i(e),z()},action:n,tokenName:a})),P=Object(v.a)(g,2),T=P[0],z=P[1];return d.a.createElement(E.a,null,d.a.createElement(N.a,null,d.a.createElement(fe,null,d.a.createElement(oe,null,"".concat(n," ").concat(c)),d.a.createElement(ue,null,d.a.createElement(se,null,d.a.createElement(ie,null,d.a.createElement(w.a,{symbol:t.symbol,size:54})),d.a.createElement(k.a,{text:a,variant:"normal"})),d.a.createElement(le,null,d.a.createElement(D.a,{icon:C.a})),d.a.createElement(se,null,d.a.createElement(ie,null,d.a.createElement(w.a,{symbol:r.symbol,size:54})),d.a.createElement(k.a,{text:c,variant:"normal"}))),d.a.createElement(me,null,o),d.a.createElement(de,null,O===_.a.APPROVED||l?d.a.createElement(j.a,{color:"primary",variant:"contained",onClick:T,disabled:l},s||n):d.a.createElement(j.a,{color:"primary",variant:"contained",disabled:O===_.a.PENDING||O===_.a.UNKNOWN,onClick:function(){return m(h(),"Unable to approve ".concat(a))}},"Approve ".concat(a))))))},be=t(729),Oe=t(822),he=t(39),xe=t(26),ge=function(){var e=Object(s.useState)(xe.a.from(0)),n=Object(v.a)(e,2),t=n[0],a=n[1],r=Object(y.a)(),c=Object(s.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,r.getTombPriceInLastTWAP();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[r]);return Object(s.useEffect)((function(){c().catch((function(e){return console.error("Failed to fetch SNO price: ".concat(e.stack))}));var e=setInterval(c,he.b.refreshInterval);return function(){return clearInterval(e)}}),[a,r,c]),t},ve=t(682),je=b.d.div(Z||(Z=Object(l.a)(["\n  font-size: 20px;\n  font-weight: 700;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[2]})),Ee=b.d.span($||($=Object(l.a)(["\n  //color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.color.grey[300]})),Ne=b.d.div(ee||(ee=Object(l.a)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: ","px;\n"])),(function(e){return e.theme.spacing[2]})),ye=function(e){var n=e.tokenName,t=e.description,a=e.price;return d.a.createElement(E.a,null,d.a.createElement(Ne,null,d.a.createElement(je,null,"\ud83d\udcb0 ".concat(n," = ").concat(a," USDC")),d.a.createElement(Ee,null,t)))},ke=function(){var e=Object(s.useState)(xe.a.from(0)),n=Object(v.a)(e,2),t=n[0],a=n[1],r=Object(y.a)();return Object(s.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a,e.next=4,r.getBondsPurchasable();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,r]),t},we=xe.a.from(10).pow(18),De=we.mul(101).div(100),Ce=t(746),Se=t.n(Ce),Pe=(Object(b.c)(ne||(ne=Object(l.a)(["\n  body {\n    background: url(",") no-repeat !important;\n    background-size: cover !important;\n  }\n"])),p.a),b.d.div(te||(te=Object(l.a)(["\n  display: flex;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n"])))),Te=b.d.div(ae||(ae=Object(l.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 80%;\n  }\n"]))),ze=b.d.div(re||(re=Object(l.a)(["\n  display: flex;\n  flex: 0.8;\n  margin: 0 20px;\n  flex-direction: column;\n\n  @media (max-width: 768px) {\n    width: 80%;\n    margin: 16px 0;\n  }\n"]))),Ae=function(){var e=Object(O.g)().path,n=Object(h.b)().account,t=Object(y.a)(),a=Object(ve.b)(),r=Object(Oe.a)(),c=ge(),o=ke(),l=Object(W.a)(null===t||void 0===t?void 0:t.TBOND),f=Object(s.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buyBonds(n);case 2:r=e.sent,a(r,{summary:"Buy ".concat(Number(n).toFixed(2)," NOSNOBOND with ").concat(n," NOSNO")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,a]),p=Object(s.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.redeemBonds(n);case 2:r=e.sent,a(r,{summary:"Redeem ".concat(n," NOSNOBOND")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,a]),b=Object(s.useMemo)((function(){return c.gt(De)}),[c]),v=Object(s.useMemo)((function(){return Number(null===r||void 0===r?void 0:r.tokenInFtm)<1.01}),[r]);return d.a.createElement(O.c,null,d.a.createElement(m.a,null,d.a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,id:"myVideo",style:{zIndex:-420}},d.a.createElement("source",{src:Se.a,type:"video/mp4"})),n?d.a.createElement(d.a.Fragment,null,d.a.createElement(O.a,{exact:!0,path:e},d.a.createElement(g.a,{icon:"\ud83c\udfe6",title:"Purchase & Redeem Bonds",subtitle:"Earn premiums upon redemption"})),d.a.createElement(Pe,null,d.a.createElement(Te,null,d.a.createElement(pe,{action:"Purchase",fromToken:t.TOMB,fromTokenName:"NOSNO",toToken:t.TBOND,toTokenName:"NOSNOBOND",priceDesc:v?Object(F.a)(o,18,4)+" NOSNOBONDs available for purchase":"NOSNO is over peg",onExchange:f,disabled:!r||b})),d.a.createElement(ze,null,d.a.createElement(ye,{tokenName:"NOSNO",description:"Last-Hour TWAP Price",price:Object(F.a)(c,18,4)}),d.a.createElement(be.a,{size:"md"}),d.a.createElement(ye,{tokenName:"NOSNOBOND",description:"Current Price: (NOSNO)^2",price:Number(null===r||void 0===r?void 0:r.tokenInFtm).toFixed(2)||"-"})),d.a.createElement(Te,null,d.a.createElement(pe,{action:"Redeem",fromToken:t.TBOND,fromTokenName:"NOSNOBOND",toToken:t.TOMB,toTokenName:"NOSNO",priceDesc:"".concat(Object(F.a)(l)," NOSNOBONDs Available in wallet"),onExchange:p,disabled:!r||l.eq(0)||!b,disabledDescription:b?null:"Enabled when NOSNO > ".concat(1.01," USDC")})))):d.a.createElement(x.a,null)))}},682:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return l}));var a=t(1),r=t(49),c=t(55),o=t(85);function i(){var e=Object(c.b)(),n=e.chainId,t=e.account,i=Object(r.b)();return Object(a.useCallback)((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.summary,c=a.approval;if(t&&n){var u=e.hash;if(!u)throw Error("No transaction hash found.");i(Object(o.a)({hash:u,from:t,chainId:n,approval:c,summary:r}))}}),[i,n,t])}function u(){var e,n=Object(c.b)().chainId,t=Object(r.c)((function(e){return e.transactions}));return n&&null!==(e=t[n])&&void 0!==e?e:{}}function l(e,n){var t=u();return Object(a.useMemo)((function(){return"string"===typeof e&&"string"===typeof n&&Object.keys(t).some((function(a){var r=t[a];if(!r)return!1;if(r.receipt)return!1;var c=r.approval;return!!c&&(c.spender===n&&c.tokenAddress===e&&function(e){return(new Date).getTime()-e.addedTime<864e5}(r))}))}),[t,n,e])}},686:function(e,n,t){"use strict";t.d(n,"a",(function(){return j}));var a,r,c,o,i,u,l=t(43),s=t(1),d=t.n(s),m=t(34),f=t(1487),p=m.d.div(a||(a=Object(l.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: ","px;\n  display: flex;\n  padding: 0 ","px;\n"])),(function(e){return e.theme.color.grey[200]}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.spacing[3]})),b=m.d.input(r||(r=Object(l.a)(["\n  background: none;\n  border: 0;\n  color: ",";\n  font-size: 18px;\n  flex: 1;\n  height: 56px;\n  margin: 0;\n  padding: 0;\n  outline: none;\n"])),(function(e){return e.theme.color.grey[600]})),O=function(e){var n=e.endAdornment,t=e.onChange,a=e.placeholder,r=e.startAdornment,c=e.value;return d.a.createElement(p,null,!!r&&r,d.a.createElement(b,{placeholder:a,value:c,onChange:t}),!!n&&n)},h=m.d.div(c||(c=Object(l.a)([""]))),x=m.d.div(o||(o=Object(l.a)(["\n  width: ","px;\n"])),(function(e){return e.theme.spacing[3]})),g=m.d.div(i||(i=Object(l.a)(["\n  align-items: center;\n  display: flex;\n"]))),v=m.d.div(u||(u=Object(l.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  font-size: 14px;\n  font-weight: 700;\n  height: 44px;\n  justify-content: flex-end;\n"])),(function(e){return e.theme.color.grey[400]})),j=function(e){var n=e.max,t=(e.symbol,e.onChange),a=e.onSelectMax,r=e.value;return d.a.createElement(h,null,d.a.createElement(v,null,n.toLocaleString()," Available"),d.a.createElement(O,{endAdornment:d.a.createElement(g,null,d.a.createElement(x,null),d.a.createElement("div",null,d.a.createElement(f.a,{size:"small",color:"primary",variant:"contained",onClick:a},"Max"))),onChange:t,placeholder:"0",value:r}))}},689:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var a,r,c,o=t(43),i=t(1),u=t.n(i),l=t(34),s=l.d.div(a||(a=Object(o.a)(["\n  align-items: center;\n  background-color: ","00;\n  display: flex;\n  height: 96px;\n  margin: ","px ","px\n    ","px;\n  padding: 0 ","px;\n"])),(function(e){return e.theme.color.grey[100]}),(function(e){return e.theme.spacing[4]}),(function(e){return-e.theme.spacing[4]}),(function(e){return-e.theme.spacing[4]}),(function(e){return e.theme.spacing[4]})),d=l.d.div(r||(r=Object(o.a)(["\n  flex: 1;\n"]))),m=l.d.div(c||(c=Object(o.a)(["\n  width: ","px;\n"])),(function(e){return e.theme.spacing[4]})),f=function(e){var n=e.children,t=u.a.Children.toArray(n).length;return u.a.createElement(s,null,u.a.Children.map(n,(function(e,n){return u.a.createElement(u.a.Fragment,null,u.a.createElement(d,null,e),n<t-1&&u.a.createElement(m,null))})))}},701:function(e,n,t){"use strict";var a=t(2),r=t.n(a),c=t(14),o=t(35),i=t(1),u=t(55);n.a=function(e,n,t){var a=Object(i.useState)(null),l=Object(o.a)(a,2),s=l[0],d=l[1],m=Object(u.b)().account,f=Object(i.useCallback)(Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.allowance(m,n);case 2:a=t.sent,d(a);case 4:case"end":return t.stop()}}),t)}))),[m,n,e]);return Object(i.useEffect)((function(){m&&n&&e&&f().catch((function(e){return console.error("Failed to fetch allowance: ".concat(e.stack))}))}),[m,n,e,t,f]),s}},704:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t(1),r=t.n(a),c=t(1509),o=t(774),i=function(){return r.a.createElement(c.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(o.a,null))}},705:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var a,r=t(2),c=t.n(r),o=t(14),i=t(90),u=t(26),l=t(1),s=t(682),d=t(701),m=i.a.constants.MaxUint256,f=u.a.from("1000000000000000000000000");!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_APPROVED=1]="NOT_APPROVED",e[e.PENDING=2]="PENDING",e[e.APPROVED=3]="APPROVED"}(a||(a={})),n.b=function(e,n){var t=Object(s.a)(e.address,n),r=Object(d.a)(e,n,t),i=Object(l.useMemo)((function(){return r?r.lt(f)?t?a.PENDING:a.NOT_APPROVED:a.APPROVED:a.UNKNOWN}),[r,t]),u=Object(s.b)(),p=Object(l.useCallback)(Object(o.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i===a.NOT_APPROVED){t.next=3;break}return console.error("approve was called unnecessarily"),t.abrupt("return");case 3:return t.next=5,e.approve(n,m);case 5:r=t.sent,u(r,{summary:"Approve ".concat(e.symbol),approval:{tokenAddress:e.address,spender:n}});case 7:case"end":return t.stop()}}),t)}))),[i,e,n,u]);return[i,p]}},729:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var a,r=t(43),c=t(1),o=t.n(c),i=t(34),u=i.d.div(a||(a=Object(r.a)(["\n  height: ","px;\n  width: ","px;\n"])),(function(e){return e.size}),(function(e){return e.size})),l=function(e){var n,t=e.size,a=void 0===t?"md":t,r=Object(c.useContext)(i.a).spacing;switch(a){case"lg":n=r[6];break;case"sm":n=r[2];break;case"md":default:n=r[4]}return o.a.createElement(u,{size:n})}},775:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var a,r,c,o=t(43),i=t(1),u=t.n(i),l=t(34),s=l.d.div(a||(a=Object(o.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ","px;\n  padding-top: ","px;\n  max-width: 700px;\n  width: 100%;\n  margin: 0 auto;\n"])),(function(e){return e.theme.spacing[6]}),(function(e){return e.theme.spacing[6]})),d=l.d.h1(r||(r=Object(o.a)(["\n  color: ",";\n  font-size: 36px;\n  font-weight: 700;\n  margin: 0;\n  padding: 0;\n"])),(function(e){return e.theme.color.black})),m=l.d.h3(c||(c=Object(o.a)(["\n  color: ",";\n  font-size: 18px;\n  font-weight: 400;\n  margin: 0;\n  padding: 0;\n  text-align: center;\n"])),(function(e){return e.theme.color.grey[700]})),f=function(e){e.icon;var n=e.subtitle,t=e.title;return u.a.createElement(s,null,u.a.createElement(d,null,t),u.a.createElement(m,null,n))}},822:function(e,n,t){"use strict";var a=t(2),r=t.n(a),c=t(14),o=t(35),i=t(1),u=t(218),l=t(669);n.a=function(){var e=Object(i.useState)(),n=Object(o.a)(e,2),t=n[0],a=n[1],s=Object(l.a)().slowRefresh,d=Object(u.a)();return Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a,e.next=4,d.getBondStat();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,d,s]),t}}}]);